{
  "url": "https://learn.microsoft.com/en-us/dotnet/orleans/host/monitoring",
  "markdown": "# Orleans observability - .NET | Microsoft Learn\n*By IEvangelist*\n---\n[Skip to main content](#main) [Skip to Ask Learn chat experience](#)\nThis browser is no longer supported.\nUpgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.\n[Download Microsoft Edge](https://go.microsoft.com/fwlink/p/?LinkID=2092881 ) [More info about Internet Explorer and Microsoft Edge](https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge)\nTable of contents Exit editor mode\nAsk Learn Ask Learn Focus mode\nTable of contents [Read in English](#) Add Add to plan [Edit](https://github.com/dotnet/docs/blob/main/docs/orleans/host/monitoring/index.md)\n---\n#### Share via\n[Facebook](#) [x.com](#) [LinkedIn](#) [Email](#)\n---\nPrint\n---\nNote\nAccess to this page requires authorization. You can try [signing in](#) or changing directories.\nAccess to this page requires authorization. You can try changing directories.\n# Orleans observability\n-   2025-05-23\nFeedback\n## In this article\nObservability is one of the most important aspects of a distributed system. It's the ability to understand the system's state at any given time. You can achieve this in various ways, including logging, metrics, and distributed tracing.\n## Logging\nOrleans uses [Microsoft.Extensions.Logging](https://www.nuget.org/packages/Microsoft.Extensions.Logging) for all silo and client logs. You can use any logging provider compatible with `Microsoft.Extensions.Logging`. Your app code relies on [dependency injection](https://learn.microsoft.com/en-us/core/extensions/dependency-injection) to get an instance of [ILogger<TCategoryName>](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1) and uses it to log messages. For more information, see [Logging in .NET](https://learn.microsoft.com/en-us/core/extensions/logging).\n## Metrics\nMetrics are numerical measurements reported over time. You most often use them to monitor an application's health and generate alerts. For more information, see [Metrics in .NET](https://learn.microsoft.com/en-us/core/diagnostics/metrics). Orleans uses the [System.Diagnostics.Metrics](https://learn.microsoft.com/en-us/core/diagnostics/compare-metric-apis#systemdiagnosticsmetrics) APIs to collect metrics. These metrics are exposed to the [OpenTelemetry](https://opentelemetry.io) project, which exports them to various monitoring systems.\nTo monitor your app without making any code changes, use the `dotnet counters` .NET diagnostic tool. To monitor Orleans [ActivitySource](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.activitysource) counters for a specific `<ProcessName>`, use the `dotnet counters monitor` command as shown:\n```\ndotnet counters monitor -n <ProcessName> --counters Microsoft.Orleans\n```\nImagine you're running the [Orleans GPS Tracker sample app](https://learn.microsoft.com/en-us/samples/dotnet/samples/orleans-gps-device-tracker-sample) and monitoring it in a separate terminal with the `dotnet counters monitor` command. The following output is typical:\n```\nPress p to pause, r to resume, q to quit.\n    Status: Running\n[Microsoft.Orleans]\n    orleans-app-requests-latency-bucket (Count / 1 sec)                    0\n        duration=10000ms                                                   0\n        duration=1000ms                                                    0\n        duration=100ms                                                     0\n        duration=10ms                                                      0\n        duration=15000ms                                                   0\n        duration=1500ms                                                    0\n        duration=1ms                                                   2,530\n        duration=2000ms                                                    0\n        duration=200ms                                                     0\n        duration=2ms                                                       0\n        duration=400ms                                                     0\n        duration=4ms                                                       0\n        duration=5000ms                                                    0\n        duration=50ms                                                      0\n        duration=6ms                                                       0\n        duration=800ms                                                     0\n        duration=8ms                                                       0\n        duration=9223372036854775807ms                                     0\n    orleans-app-requests-latency-count (Count / 1 sec)                 2,530\n    orleans-app-requests-latency-sum (Count / 1 sec)                       0\n    orleans-catalog-activation-working-set                                36\n    orleans-catalog-activations                                           38\n    orleans-consistent-ring-range-percentage-average                     100\n    orleans-consistent-ring-range-percentage-local                       100\n    orleans-consistent-ring-size                                           1\n    orleans-directory-cache-size                                          27\n    orleans-directory-partition-size                                      26\n    orleans-directory-ring-local-portion-average-percentage              100\n    orleans-directory-ring-local-portion-distance                          0\n    orleans-directory-ring-local-portion-percentage                        0\n    orleans-directory-ring-size                                        1,295\n    orleans-gateway-received (Count / 1 sec)                           1,291\n    orleans-gateway-sent (Count / 1 sec)                               2,582\n    orleans-messaging-processing-activation-data                           0\n    orleans-messaging-processing-dispatcher-forwarded (Count / 1           0\n    orleans-messaging-processing-dispatcher-processed (Count / 1       2,543\n        Direction=Request,Status=Ok                                    2,582\n    orleans-messaging-processing-dispatcher-received (Count / 1        1,271\n        Context=Grain,Direction=Request                                1,291\n        Context=None,Direction=Request                                 1,291\n    orleans-messaging-processing-ima-enqueued (Count / 1 sec)          5,113\n```\nFor more information, see [Investigate performance counters (dotnet-counters)](https://learn.microsoft.com/en-us/core/diagnostics/dotnet-counters).\n### Orleans meters\nOrleans uses the [System.Diagnostics.Metrics](https://learn.microsoft.com/en-us/core/diagnostics/compare-metric-apis#systemdiagnosticsmetrics) APIs to collect metrics. Orleans categorizes each meter into domain-centric concerns, such as networking, messaging, gateway, etc. The following subsections describe the meters Orleans uses.\n#### Networking\nThe following table shows a collection of networking meters used to monitor the Orleans networking layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-networking-sockets-closed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of sockets that have closed. |\n| `orleans-networking-sockets-opened` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of sockets that have opened. |\n#### Messaging\nThe following table shows a collection of messaging meters used to monitor the Orleans messaging layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-messaging-sent-messages-size` | [Histogram<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.histogram-1) | A histogram representing the size of messages in bytes that have been sent. |\n| `orleans-messaging-received-messages-size` | [Histogram<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.histogram-1) | A histogram representing the size of messages in bytes that have been received. |\n| `orleans-messaging-sent-header-size` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of header bytes sent. |\n| `orleans-messaging-received-header-size` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of header bytes received. |\n| `orleans-messaging-sent-failed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of failed sent messages. |\n| `orleans-messaging-sent-dropped` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of dropped sent messages. |\n| `orleans-messaging-processing-dispatcher-received` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number dispatcher received messages. |\n| `orleans-messaging-processing-dispatcher-processed` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number dispatcher processed messages. |\n| `orleans-messaging-processing-dispatcher-forwarded` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number dispatcher forwarded messages. |\n| `orleans-messaging-processing-ima-received` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of incoming messages received. |\n| `orleans-messaging-processing-ima-enqueued` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of incoming messages enqueued. |\n| `orleans-messaging-processing-activation-data` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing all of the processing activation data. |\n| `orleans-messaging-pings-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of pings sent. |\n| `orleans-messaging-pings-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of pings received. |\n| `orleans-messaging-pings-reply-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of ping replies received. |\n| `orleans-messaging-pings-reply-missed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of ping replies missed. |\n| `orleans-messaging-expired\"` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of messages that have expired. |\n| `orleans-messaging-rejected` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of messages that have been rejected. |\n| `orleans-messaging-rerouted` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of messages that have been rerouted. |\n| `orleans-messaging-sent-local` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of local messages sent. |\n#### Gateway\nThe following table shows a collection of gateway meters used to monitor the Orleans gateway layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-gateway-connected-clients` | [UpDownCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.updowncounter-1) | An up/down counter representing the number of connected clients. |\n| `orleans-gateway-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of gateway messages sent. |\n| `orleans-gateway-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of gateway messages received. |\n| `orleans-gateway-load-shedding` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of gateway (load shedding) messages that have been rejected due to the gateway being overloaded. |\n#### Runtime\nThe following table shows a collection of runtime meters used to monitor the Orleans runtime layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-scheduler-long-running-turns` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of long running turns within the scheduler. |\n| `orleans-runtime-total-physical-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the total number of memory (in MB) of the Orleans runtime. |\n| `orleans-runtime-available-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the available memory (in MB) for the Orleans runtime. |\n#### Catalog\nThe following table shows a collection of catalog meters used to monitor the Orleans catalog layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-catalog-activations` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the number of catalog activations. |\n| `orleans-catalog-activation-working-set` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the number of activations within the working set. |\n| `orleans-catalog-activation-created` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of created activations. |\n| `orleans-catalog-activation-destroyed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of destroyed activations. |\n| `orleans-catalog-activation-failed-to-activate` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of activations that failed to activate. |\n| `orleans-catalog-activation-collections` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of idle activation collections. |\n| `orleans-catalog-activation-shutdown` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of shutdown activations. |\n| `orleans-catalog-activation-non-existent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of non-existent activations. |\n| `orleans-catalog-activation-concurrent-registration-attempts` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of concurrent activation registration attempts. |\n#### Directory\nThe following table shows a collection of directory meters used to monitor the Orleans directory layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-directory-lookups-local-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of local lookups issued. |\n| `orleans-directory-lookups-local-successes` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of local successful lookups. |\n| `orleans-directory-lookups-full-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of full directory lookups issued. |\n| `orleans-directory-lookups-remote-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of remote directory lookups sent. |\n| `orleans-directory-lookups-remote-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of remote directory lookups received. |\n| `orleans-directory-lookups-local-directory-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of local directory lookups issued. |\n| `orleans-directory-lookups-local-directory-successes` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of local directory successful lookups. |\n| `orleans-directory-lookups-cache-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count cached lookups issued. |\n| `orleans-directory-lookups-cache-successes` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of cached successful lookups. |\n| `orleans-directory-validations-cache-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory cache validations sent. |\n| `orleans-directory-validations-cache-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory cache validations received. |\n| `orleans-directory-partition-size` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the directory partition size. |\n| `orleans-directory-cache-size` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the directory cache size. |\n| `orleans-directory-ring-size` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the directory ring size. |\n| `orleans-directory-ring-local-portion-distance` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the ring range owned by the local directory partition. |\n| `orleans-directory-ring-local-portion-percentage` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the ring range owned by the local directory, represented as a percentage of the total range. |\n| `orleans-directory-ring-local-portion-average-percentage` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the average percentage of the directory ring range owned by each silo, giving a representation of how balanced directory ownership. |\n| `orleans-directory-registrations-single-act-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory single activation registrations issued. |\n| `orleans-directory-registrations-single-act-local` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory single activation registrations handled by the local directory partition. |\n| `orleans-directory-registrations-single-act-remote-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory single activation registrations sent to a remote directory partition. |\n| `orleans-directory-registrations-single-act-remote-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory single activation registrations received from remote hosts. |\n| `orleans-directory-unregistrations-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory deregistrations issued. |\n| `orleans-directory-unregistrations-local` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory deregistrations handled by the local directory partition. |\n| `orleans-directory-unregistrations-remote-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory deregistrations sent to remote directory partitions. |\n| `orleans-directory-unregistrations-remote-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory deregistrations received from remote hosts. |\n| `orleans-directory-unregistrations-many-issued` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory multi-activation deregistrations issued. |\n| `orleans-directory-unregistrations-many-remote-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory multi-activations deregistrations sent to remote directory partitions. |\n| `orleans-directory-unregistrations-many-remote-received` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of directory multi-activation deregistrations received from remote hosts. |\n#### Consistent ring\nThe following table shows a collection of consistent ring meters used to monitor the Orleans consistent ring layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-consistent-ring-size` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the consistent ring size. |\n| `orleans-consistent-ring-range-percentage-local` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the consistent ring local percentage. |\n| `orleans-consistent-ring-range-percentage-average` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the consistent ring average percentage. |\n#### Watchdog\nThe following table shows a collection of watchdog meters used to monitor the Orleans watchdog layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-watchdog-health-checks` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of watchdog health checks. |\n| `orleans-watchdog-health-checks-failed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of failed watchdog health checks. |\n#### Client\nThe following table shows a collection of client meters used to monitor the Orleans client layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-client-connected-gateways` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the number of connected gateway clients. |\n#### Miscellaneous\nThe following table shows a collection of miscellaneous meters used to monitor various layers.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-grains` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count representing the number of grains. |\n| `orleans-system-targets` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count representing the number of system targets. |\n#### App requests\nThe following table shows a collection of app request meters used to monitor the Orleans app request layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-app-requests-latency` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing app request latency. |\n| `orleans-app-requests-timedout` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing app requests that have timed out. |\n#### Reminders\nThe following table shows a collection of reminder meters used to monitor the Orleans reminder layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-reminders-tardiness` | [Histogram<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.histogram-1) | A histogram representing the number of seconds a reminder is tardy. |\n| `orleans-reminders-active` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the number active reminders. |\n| `orleans-reminders-ticks-delivered` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count representing the number of reminder ticks that have been delivered. |\n#### Storage\nThe following table shows a collection of storage meters used to monitor the Orleans storage layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-storage-read-errors` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count representing the number of storage read errors. |\n| `orleans-storage-write-errors` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count representing the number of storage write errors. |\n| `orleans-storage-clear-errors` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count representing the number of storage clear errors. |\n| `orleans-storage-read-latency` | [Histogram<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.histogram-1) | A histogram representing the storage read latency in milliseconds. |\n| `orleans-storage-write-latency` | [Histogram<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.histogram-1) | A histogram representing the storage write latency in milliseconds. |\n| `orleans-storage-clear-latency` | [Histogram<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.histogram-1) | A histogram representing the storage clear latency in milliseconds. |\n#### Streams\nThe following table shows a collection of stream meters used to monitor the Orleans stream layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-streams-pubsub-producers-added` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of streaming pubsub producers added. |\n| `orleans-streams-pubsub-producers-removed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of streaming pubsub producers removed. |\n| `orleans-streams-pubsub-producers` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of streaming pubsub producers. |\n| `orleans-streams-pubsub-consumers-added` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of streaming pubsub consumers added. |\n| `orleans-streams-pubsub-consumers-removed` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of streaming pubsub consumers removed. |\n| `orleans-streams-pubsub-consumers` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of streaming pubsub consumers. |\n| `orleans-streams-persistent-stream-pulling-agents` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the number of persistent stream pulling agents. |\n| `orleans-streams-persistent-stream-messages-read` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of persistent stream messages read. |\n| `orleans-streams-persistent-stream-messages-sent` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of persistent stream messages sent. |\n| `orleans-streams-persistent-stream-pubsub-cache-size` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the persistent stream pubsub cache size. |\n| `orleans-streams-queue-initialization-failures` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue initialization failures. |\n| `orleans-streams-queue-initialization-duration` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue initialization occurrences. |\n| `orleans-streams-queue-initialization-exceptions` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue initialization exceptions. |\n| `orleans-streams-queue-read-failures` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue read failures. |\n| `orleans-streams-queue-read-duration` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue read occurrences. |\n| `orleans-streams-queue-read-exceptions` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue read exceptions. |\n| `orleans-streams-queue-shutdown-failures` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue shutdown failures. |\n| `orleans-streams-queue-shutdown-duration` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue shutdown occurrences. |\n| `orleans-streams-queue-shutdown-exceptions` | [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) | A count of steam queue shutdown exceptions. |\n| `orleans-streams-queue-messages-received` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of stream queue messages received. |\n| `orleans-streams-queue-oldest-message-enqueue-age` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the age of the oldest enqueued message. |\n| `orleans-streams-queue-newest-message-enqueue-age` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the age of the newest enqueued message. |\n| `orleans-streams-block-pool-total-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream block pool total memory in bytes. |\n| `orleans-streams-block-pool-available-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream block pool available memory in bytes. |\n| `orleans-streams-block-pool-claimed-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream block pool claimed memory in bytes. |\n| `orleans-streams-block-pool-released-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream block pool released memory in bytes. |\n| `orleans-streams-block-pool-allocated-memory` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream block pool allocated memory in bytes. |\n| `orleans-streams-queue-cache-size` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue cache size in bytes. |\n| `orleans-streams-queue-cache-length` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue length. |\n| `orleans-streams-queue-cache-messages-added` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue messages added. |\n| `orleans-streams-queue-cache-messages-purged` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue messages purged. |\n| `orleans-streams-queue-cache-memory-allocated` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue memory allocated. |\n| `orleans-streams-queue-cache-memory-released` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue memory released. |\n| `orleans-streams-queue-cache-oldest-to-newest-duration` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the duration from the oldest to the newest stream queue cache. |\n| `orleans-streams-queue-cache-oldest-age` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the age of the oldest cached message. |\n| `orleans-streams-queue-cache-pressure` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing the pressure on the stream queue cache. |\n| `orleans-streams-queue-cache-under-pressure` | [ObservableGauge<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablegauge-1) | An observable gauge representing whether the stream queue cache is under pressure. |\n| `orleans-streams-queue-cache-pressure-contribution-count` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the stream queue cache pressure contributions. |\n#### Transactions\nThe following table shows a collection of transaction meters used to monitor the Orleans transaction layer.\n| Meter name | Type | Description |\n| --- | --- | --- |\n| `orleans-transactions-started` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of started transactions. |\n| `orleans-transactions-successful` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of successful transactions. |\n| `orleans-transactions-failed` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of failed transactions. |\n| `orleans-transactions-throttled` | [ObservableCounter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.observablecounter-1) | An observable counter representing the number of throttled transactions. |\n### Prometheus\nVarious third-party metrics providers are available for use with Orleans. One popular example is [Prometheus](https://prometheus.io), which you can use to collect metrics from your app with OpenTelemetry.\nTo use OpenTelemetry and Prometheus with Orleans, call the following `IServiceCollection` extension method:\n```\nbuilder.Services.AddOpenTelemetry()\n    .WithMetrics(metrics =>\n    {\n        metrics\n            .AddPrometheusExporter()\n            .AddMeter(\"Microsoft.Orleans\");\n    });\n```\nImportant\nBoth the [OpenTelemetry.Exporter.Prometheus](https://www.nuget.org/packages/OpenTelemetry.Exporter.Prometheus) and [OpenTelemetry.Exporter.Prometheus.AspNetCore](https://www.nuget.org/packages/OpenTelemetry.Exporter.Prometheus.AspNetCore) NuGet packages are currently in preview as release candidates. They're not recommended for production use.\nThe `AddPrometheusExporter` method ensures the `PrometheusExporter` is added to the `builder`. Orleans uses a [Meter](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.meter) named `\"Microsoft.Orleans\"` to create [Counter<T>](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.metrics.counter-1) instances for many Orleans-specific metrics. Use the `AddMeter` method to specify the name of the meter to subscribe to, in this case, `\"Microsoft.Orleans\"`.\nAfter configuring the exporter and building your app, call `MapPrometheusScrapingEndpoint` on the `IEndpointRouteBuilder` (the `app` instance) to expose the metrics to Prometheus. For example:\n```\nWebApplication app = builder.Build();\napp.MapPrometheusScrapingEndpoint();\napp.Run();\n```\n## Distributed tracing\nDistributed tracing is a set of tools and practices for monitoring and troubleshooting distributed applications. It's a key component of observability and a critical tool for understanding your app's behavior. Orleans supports distributed tracing with [OpenTelemetry](https://opentelemetry.io).\nRegardless of the distributed tracing exporter you choose, call:\n-   [AddActivityPropagation(ISiloBuilder)](https://learn.microsoft.com/en-us/dotnet/api/orleans.hosting.corehostingextensions.addactivitypropagation#orleans-hosting-corehostingextensions-addactivitypropagation\\(orleans-hosting-isilobuilder\\)): which enables distributed tracing for the silo.\n-   [AddActivityPropagation(IClientBuilder)](https://learn.microsoft.com/en-us/dotnet/api/orleans.hosting.clientbuilderextensions.addactivitypropagation#orleans-hosting-clientbuilderextensions-addactivitypropagation\\(orleans-hosting-iclientbuilder\\)): which enables distributed tracing for the client.\nReferring back to the [Orleans GPS Tracker sample app](https://learn.microsoft.com/en-us/samples/dotnet/samples/orleans-gps-device-tracker-sample), you can use the [Zipkin](https://zipkin.io) distributed tracing system to monitor the app by updating _Program.cs_. To use OpenTelemetry and Zipkin with Orleans, call the following `IServiceCollection` extension method:\n```\nbuilder.Services.AddOpenTelemetry()\n    .WithTracing(tracing =>\n    {\n        // Set a service name\n        tracing.SetResourceBuilder(\n            ResourceBuilder.CreateDefault()\n                .AddService(serviceName: \"GPSTracker\", serviceVersion: \"1.0\"));\n        tracing.AddSource(\"Microsoft.Orleans.Runtime\");\n        tracing.AddSource(\"Microsoft.Orleans.Application\");\n        tracing.AddZipkinExporter(zipkin =>\n        {\n            zipkin.Endpoint = new Uri(\"http://localhost:9411/api/v2/spans\");\n        });\n    });\n```\nImportant\nThe [OpenTelemetry.Exporter.Zipkin](https://www.nuget.org/packages/OpenTelemetry.Exporter.Zipkin) NuGet package is currently in preview as a release candidate. It is not recommended for production use.\nThe Zipkin trace is shown in the Jaeger UI (an alternative to Zipkin that uses the same data format):\n[![Orleans GPS Tracker sample app: Jaeger UI trace.](https://learn.microsoft.com/en-us/dotnet/orleans/media/jaeger-ui.png)](https://learn.microsoft.com/en-us/dotnet/orleans/media/jaeger-ui.png#lightbox)\nFor more information, see [Distributed tracing](https://learn.microsoft.com/en-us/core/diagnostics/distributed-tracing).\nOrleans outputs its runtime statistics and metrics through the [ITelemetryConsumer](https://learn.microsoft.com/en-us/dotnet/api/orleans.runtime.itelemetryconsumer) interface. Your application can register one or more telemetry consumers for its silos and clients to receive statistics and metrics the Orleans runtime periodically publishes. These can be consumers for popular telemetry analytics solutions or custom ones for any other destination and purpose. Three telemetry consumers are currently included in the Orleans codebase.\nThey're released as separate NuGet packages:\n-   `Microsoft.Orleans.OrleansTelemetryConsumers.AI`: For publishing to [Azure Application Insights](https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview).\n-   `Microsoft.Orleans.OrleansTelemetryConsumers.Counters`: For publishing to Windows performance counters. The Orleans runtime continually updates many of them. The _CounterControl.exe_ tool, included in the [`Microsoft.Orleans.CounterControl`](https://www.nuget.org/packages/Microsoft.Orleans.CounterControl/) NuGet package, helps register necessary performance counter categories. It must run with elevated privileges. Monitor the performance counters using any standard monitoring tools.\n-   `Microsoft.Orleans.OrleansTelemetryConsumers.NewRelic`: For publishing to [New Relic](https://newrelic.com/).\nTo configure your silo and client to use telemetry consumers, the silo configuration code looks like this:\n```\nvar siloHostBuilder = new HostBuilder()\n    .UseOrleans(c =>\n    {\n        c.AddApplicationInsightsTelemetryConsumer(\"INSTRUMENTATION_KEY\");\n    });\n```\nThe client configuration code looks like this:\n```\nvar clientBuilder = new ClientBuilder();\nclientBuilder.AddApplicationInsightsTelemetryConsumer(\"INSTRUMENTATION_KEY\");\n```\nTo use a custom-defined [TelemetryConfiguration](https://learn.microsoft.com/en-us/dotnet/api/microsoft.applicationinsights.extensibility.telemetryconfiguration) (which might have [TelemetryProcessors](https://learn.microsoft.com/en-us/dotnet/api/microsoft.applicationinsights.extensibility.telemetryconfiguration.telemetryprocessors#microsoft-applicationinsights-extensibility-telemetryconfiguration-telemetryprocessors), [TelemetrySinks](https://learn.microsoft.com/en-us/dotnet/api/microsoft.applicationinsights.extensibility.telemetryconfiguration.telemetrysinks#microsoft-applicationinsights-extensibility-telemetryconfiguration-telemetrysinks), etc.), the silo configuration code looks like this:\n```\nvar telemetryConfiguration = TelemetryConfiguration.CreateDefault();\nvar siloHostBuilder = new HostBuilder()\n    .UseOrleans(c =>\n    {\n        c.AddApplicationInsightsTelemetryConsumer(telemetryConfiguration);\n    });\n```\nClient configuration code look like this:\n```\nvar clientBuilder = new ClientBuilder();\nvar telemetryConfiguration = TelemetryConfiguration.CreateDefault();\nclientBuilder.AddApplicationInsightsTelemetryConsumer(telemetryConfiguration);\n```\n## See also\n-   [Logging in .NET](https://learn.microsoft.com/en-us/core/extensions/logging)\n-   [.NET metrics](https://learn.microsoft.com/en-us/core/diagnostics/metrics)\n-   [Investigate performance counters (dotnet-counters)](https://learn.microsoft.com/en-us/core/diagnostics/dotnet-counters)\n-   [.NET distributed tracing](https://learn.microsoft.com/en-us/core/diagnostics/distributed-tracing)\nCollaborate with us on GitHub\nThe source for this content can be found on GitHub, where you can also create and review issues and pull requests. For more information, see [our contributor guide](https://learn.microsoft.com/contribute/content/dotnet/dotnet-contribute).\n![](https://learn.microsoft.com/media/logos/logo_net.svg) ![](https://learn.microsoft.com/media/logos/logo_net.svg)\n.NET\n[Open a documentation issue](#) [Provide product feedback](https://github.com/dotnet/orleans)\n---\n## Feedback\nWas this page helpful?\nYes No\n---\n## Additional resources\n### In this article\nWas this page helpful?\nYes No\n[en-us](#)\n[Your Privacy Choices](https://aka.ms/yourcaliforniaprivacychoices)\nTheme\n-   Light\n-   Dark\n-   High contrast\n-   [AI Disclaimer](https://learn.microsoft.com/en-us/principles-for-ai-generated-content)\n-   [Previous Versions](https://learn.microsoft.com/en-us/previous-versions/)\n-   [Blog](https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog)\n-   [Contribute](https://learn.microsoft.com/en-us/contribute)\n-   [Privacy](https://go.microsoft.com/fwlink/?LinkId=521839)\n-   [Terms of Use](https://learn.microsoft.com/en-us/legal/termsofuse)\n-   [Trademarks](https://www.microsoft.com/legal/intellectualproperty/Trademarks/)\n-   Â© Microsoft 2025",
  "timestamp": 1757683947690,
  "title": "Orleans observability - .NET | Microsoft Learn"
}